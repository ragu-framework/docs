(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{115:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(119),o=a(110),c=a(57),l=a.n(c);var s=37,m=39;t.a=function(e){var t=e.lazy,a=e.block,c=e.defaultValue,p=e.values,d=e.groupId,b=e.className,u=Object(i.a)(),h=u.tabGroupChoices,v=u.setTabGroupChoices,f=Object(n.useState)(c),j=f[0],g=f[1],N=n.Children.toArray(e.children),O=[];if(null!=d){var w=h[d];null!=w&&w!==j&&p.some((function(e){return e.value===w}))&&g(w)}var x=function(e){var t=e.target,a=O.indexOf(t),n=N[a].props.value;g(n),null!=d&&(v(d,n),setTimeout((function(){var e,a,n,r,i,o,c,s;(e=t.getBoundingClientRect(),a=e.top,n=e.left,r=e.bottom,i=e.right,o=window,c=o.innerHeight,s=o.innerWidth,a>=0&&i<=s&&r<=c&&n>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(l.a.tabItemActive),setTimeout((function(){return t.classList.remove(l.a.tabItemActive)}),2e3))}),150))},y=function(e){var t,a;switch(e.keyCode){case m:var n=O.indexOf(e.target)+1;a=O[n]||O[0];break;case s:var r=O.indexOf(e.target)-1;a=O[r]||O[O.length-1]}null===(t=a)||void 0===t||t.focus()};return r.a.createElement("div",{className:"tabs-container"},r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(o.a)("tabs",{"tabs--block":a},b)},p.map((function(e){var t=e.value,a=e.label;return r.a.createElement("li",{role:"tab",tabIndex:j===t?0:-1,"aria-selected":j===t,className:Object(o.a)("tabs__item",l.a.tabItem,{"tabs__item--active":j===t}),key:t,ref:function(e){return O.push(e)},onKeyDown:y,onFocus:x,onClick:x},a)}))),t?Object(n.cloneElement)(N.filter((function(e){return e.props.value===j}))[0],{className:"margin-vert--md"}):r.a.createElement("div",{className:"margin-vert--md"},N.map((function(e,t){return Object(n.cloneElement)(e,{key:t,hidden:e.props.value!==j})}))))}},116:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){var t=e.children,a=e.hidden,n=e.className;return r.a.createElement("div",{role:"tabpanel",hidden:a,className:n},t)}},118:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a.n(n),i=a(117),o=a(115),c=a(116),l=function(e){var t=e.yarn,a=e.npm,n=e.both,l=e.binExecution,s=t||n,m=a||n;return r.a.createElement(o.a,{defaultValue:"yarn",values:[{label:"Yarn",value:"yarn"},{label:"NPM",value:"npm"}]},r.a.createElement(c.a,{value:"yarn"},r.a.createElement(i.a,{className:"language-shell"},"yarn "+s)),r.a.createElement(c.a,{value:"npm"},r.a.createElement(i.a,{className:"language-shell"},(l?"npx":"npm")+" "+m)))}},91:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return l})),a.d(t,"toc",(function(){return s})),a.d(t,"default",(function(){return p}));var n=a(3),r=a(8),i=(a(0),a(114)),o=a(118),c={title:"How to create a micro-frontend with React?",sidebar_label:"Exposing a micro-frontend",slug:"/react/exposing-a-micro-frontend"},l={unversionedId:"react/01-exposing-a-micro-frontend",id:"react/01-exposing-a-micro-frontend",isDocsHomePage:!1,title:"How to create a micro-frontend with React?",description:"Ragu is completely compatible with React. This article will teach you how to expose a micro-frontend using react.",source:"@site/docs/react/01-exposing-a-micro-frontend.mdx",slug:"/react/exposing-a-micro-frontend",permalink:"/docs/react/exposing-a-micro-frontend",editUrl:"https://github.com/ragu-framework/docs/edit/main/docs/react/01-exposing-a-micro-frontend.mdx",version:"current",sidebar_label:"Exposing a micro-frontend",sidebar:"docs",previous:{title:"Design Goals",permalink:"/docs/design-goals"},next:{title:"Consuming a micro-frontend",permalink:"/docs/react/consuming-a-micro-frontend"}},s=[{value:"Installing dependencies",id:"installing-dependencies",children:[]},{value:"The micro-frontend file",id:"the-micro-frontend-file",children:[{value:"Exposing a React Component",id:"exposing-a-react-component",children:[]},{value:"Receiving Parameters",id:"receiving-parameters",children:[]}]},{value:"Server Side Rendering",id:"server-side-rendering",children:[]},{value:"The state file",id:"the-state-file",children:[]}],m={toc:s};function p(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(n.a)({},m,a,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Ragu is completely compatible with React. This article will teach you how to expose a micro-frontend using react.\nYou must have a React project set up. If you don't have one, we recommend you to start one using\n",Object(i.b)("a",{parentName:"p",href:"https://github.com/facebook/create-react-app"},"create-react-app"),"."),Object(i.b)("h2",{id:"installing-dependencies"},"Installing dependencies"),Object(i.b)("p",null,"You must have both ",Object(i.b)("inlineCode",{parentName:"p"},"ragu-cli")," and ",Object(i.b)("inlineCode",{parentName:"p"},"ragu-server-adapter")," to expose your micro-frontends."),Object(i.b)(o.a,{npm:"install ragu-cli ragu-react-server-adapter --save-dev",yarn:"add ragu-cli ragu-react-server-adapter --dev",mdxType:"PackageManager"}),Object(i.b)("h2",{id:"the-micro-frontend-file"},"The micro-frontend file"),Object(i.b)("p",null,"The micro-frontend file follow the same guidelines described at the ",Object(i.b)("a",{parentName:"p",href:"/micro-frontends"},"Micro-frontends section")," the\nonly difference is that when using React you must ",Object(i.b)("inlineCode",{parentName:"p"},"export")," a ",Object(i.b)("inlineCode",{parentName:"p"},"default")," ",Object(i.b)("inlineCode",{parentName:"p"},"function")," that returns a React element."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Create the micro-frontend file."),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-jsx",metastring:'title="my-mfe.js"',title:'"my-mfe.js"'},"export default () => <div>\n  Hello, World!\n</div>\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Now use ",Object(i.b)("inlineCode",{parentName:"p"},"ragu-cli")," to start the development server:"),Object(i.b)(o.a,{binExecution:!0,both:"ragu-cli dev --file my-mfe.js",mdxType:"PackageManager"})),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Check the micro-frontend live ",Object(i.b)("a",{parentName:"p",href:"http://localhost:3100/preview"},"http://localhost:3100/preview")),Object(i.b)("div",{parentName:"li",className:"admonition admonition-info alert alert--info"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Code Example")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"The code of the examples above can be found ",Object(i.b)("a",{parentName:"p",href:"https://github.com/ragu-framework/docs/tree/main/examples/react/exposing"},"here"),"."))))),Object(i.b)("h3",{id:"exposing-a-react-component"},"Exposing a React Component"),Object(i.b)("p",null,"You also can return a React component."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-jsx",metastring:'title="my-mfe.js"',title:'"my-mfe.js"'},"const HelloWorld = () => <div>\n  Hello, World!\n</div>\n\nexport default () => <HelloWorld />\n")),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Code Example")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"The code of the examples above can be found ",Object(i.b)("a",{parentName:"p",href:"https://github.com/ragu-framework/docs/tree/main/examples/react/exposing-component"},"here"),"."))),Object(i.b)("h3",{id:"receiving-parameters"},"Receiving Parameters"),Object(i.b)("p",null,"The previous example outputs a ",Object(i.b)("inlineCode",{parentName:"p"},"Hello, World")," micro-frontend. Let's say, instead of\n",Object(i.b)("inlineCode",{parentName:"p"},"Hello, World")," we want to receive the name which the micro-frontend will say ",Object(i.b)("inlineCode",{parentName:"p"},"Hello")," to."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Create a micro-frontend file."),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-jsx",metastring:'title="my-mfe.js"',title:'"my-mfe.js"'},"const HelloWorld = ({name}) => <div>\n  Hello, {name}!\n</div>\n\nexport default ({params}) => <HelloWorld name={params.name} />\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Start the ragu development server."),Object(i.b)(o.a,{binExecution:!0,both:"ragu-cli dev --file my-mfe.js",mdxType:"PackageManager"})),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Open the preview page providing the name query parameter ",Object(i.b)("a",{parentName:"p",href:"http://localhost:3100/preview?name=Ragu"},"http://localhost:3100/preview?name=Ragu"),"."),Object(i.b)("div",{parentName:"li",className:"admonition admonition-info alert alert--info"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Code Example")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"The code of the examples above can be found ",Object(i.b)("a",{parentName:"p",href:"https://github.com/ragu-framework/docs/tree/main/examples/react/receiving-params"},"here"),"."))))),Object(i.b)("h2",{id:"server-side-rendering"},"Server Side Rendering"),Object(i.b)("p",null,"To enable ",Object(i.b)("inlineCode",{parentName:"p"},"SSR")," you should provide the ",Object(i.b)("inlineCode",{parentName:"p"},"--ssrEnabled")," flag.\nWith this flag Ragu will start to return the micro-frontend HTML rendered from server."),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"This section describes how to enable ",Object(i.b)("inlineCode",{parentName:"p"},"SSR")," at your React micro-frontend. For more information about Ragu and ",Object(i.b)("inlineCode",{parentName:"p"},"SSR"),"\ntake a look at the ",Object(i.b)("a",{parentName:"p",href:"/docs/server-side-rendering"},"Server Side Rendering section"),"."))),Object(i.b)("h2",{id:"the-state-file"},"The state file"),Object(i.b)("p",null,"Let's say you want your micro-frontend to perform an async operation, fetching a request for example. You can use\na state file for this purpose."),Object(i.b)("p",null,"The state file must export a default function that returns a ",Object(i.b)("inlineCode",{parentName:"p"},"Promise"),".\nProperties received by the ",Object(i.b)("inlineCode",{parentName:"p"},"state")," function are the same described at\n",Object(i.b)("a",{parentName:"p",href:"/docs/micro-frontends#receiving-parameters"},"Micro-frontend API"),"."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Create the state file"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-js",metastring:'title="state.js"',title:'"state.js"'},"export default async ({params}) => {\n  if (!params.number) {\n    return null;\n  }\n\n  const pokemonResponse = await fetch(`https://pokeapi.co/api/v2/pokemon/${params.number}`);\n  const pokemonResponseBody = await pokemonResponse.json();\n\n  return {\n    name: pokemonResponseBody.name\n  }\n}\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Receive the ",Object(i.b)("inlineCode",{parentName:"p"},"state")," into the micro-frontend function."),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-jsx",metastring:'title="my-mfe.js"',title:'"my-mfe.js"'},"const HelloWorld = ({number, name}) => <div>\n  The pokemon number {number} is called {name}\n</div>\n\nexport default ({params, state}) =>{\n  if (!params.number) {\n    return <div>You must specify a pok\xe9mon <strong>number</strong></div>\n  }\n\n  return <HelloWorld number={params.number} name={state.name} />;\n}\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Starts the development server using the ",Object(i.b)("inlineCode",{parentName:"p"},"SSR")," mode. ",Object(i.b)(o.a,{binExecution:!0,both:"ragu-cli dev --file my-mfe.js --stateFile state.js --ssrEnabled",mdxType:"PackageManager"}))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Check the micro-frontend live ",Object(i.b)("a",{parentName:"p",href:"http://localhost:3100/preview?number=1"},"http://localhost:3100/preview?number=1")),Object(i.b)("div",{parentName:"li",className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"The state is always executed the ",Object(i.b)("inlineCode",{parentName:"p"},"server-side")," it means that the state will always be null when ",Object(i.b)("inlineCode",{parentName:"p"},"SSR")," is not enabled."))),Object(i.b)("div",{parentName:"li",className:"admonition admonition-info alert alert--info"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Code Example")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"The code of the examples above can be found ",Object(i.b)("a",{parentName:"p",href:"https://github.com/ragu-framework/docs/tree/main/examples/react/state"},"here"),"."))))))}p.isMDXComponent=!0}}]);