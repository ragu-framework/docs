(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{100:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return m})),n.d(t,"default",(function(){return p}));var a=n(3),o=n(7),i=(n(0),n(110)),c=n(140),r=n(114),l={title:"Consuming a micro-frontend",slug:"/react/consuming-a-micro-frontend"},s={unversionedId:"react/02-consuming-a-micro-frontend",id:"react/02-consuming-a-micro-frontend",isDocsHomePage:!1,title:"Consuming a micro-frontend",description:"Ragu can inject a front-end made by any technology into any application. This article explains how to inject Ragu's",source:"@site/docs/react/02-consuming-a-micro-frontend.mdx",slug:"/react/consuming-a-micro-frontend",permalink:"/docs/react/consuming-a-micro-frontend",editUrl:"https://github.com/ragu-framework/docs/edit/main/docs/react/02-consuming-a-micro-frontend.mdx",version:"current",sidebar:"docs",previous:{title:"Exposing a micro-frontend",permalink:"/docs/react/exposing-a-micro-frontend"}},m=[{value:"Installing the Client",id:"installing-the-client",children:[]},{value:"Injecting a micro-frontend",id:"injecting-a-micro-frontend",children:[{value:"Providing props",id:"providing-props",children:[]},{value:"Advanced options and callbacks:",id:"advanced-options-and-callbacks",children:[]}]}],d={toc:m};function p(e){var t=e.components,l=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},d,l,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Ragu can inject a front-end made by any technology into any application. This article explains how to inject Ragu's\nmicro-frontends into a React application. You must have a React project set up.\nIf you don't have one, we recommend you to start one using\n",Object(i.b)("a",{parentName:"p",href:"https://github.com/facebook/create-react-app"},"create-react-app"),"."),Object(i.b)("p",null,Object(i.b)("img",{alt:"Front-end injection",src:n(134).default})),Object(i.b)("h2",{id:"installing-the-client"},"Installing the Client"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"ragu-client-react")," provides a React component to inject Ragu micro-frontends into any React application."),Object(i.b)(c.a,{packageName:"ragu-client-react",isDev:!0,mdxType:"InstallPackage"}),Object(i.b)("h2",{id:"injecting-a-micro-frontend"},"Injecting a micro-frontend"),Object(i.b)("p",null,"To inject a micro-frontend you must provide a ",Object(i.b)("inlineCode",{parentName:"p"},"manifest")," url for one of the available Ragu clients."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},'Create a simple "Hello, World" micro-frontend that will be injected into our React application.'),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-jsx",metastring:'title="my-mfe.js"',title:'"my-mfe.js"'},"export default () => <div>\n  Hello, World!\n</div>\n"))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Now start the micro-frontend."),Object(i.b)(r.a,{binExecution:!0,both:"ragu-cli dev --file my-mfe.js",mdxType:"PackageManager"}),Object(i.b)("p",{parentName:"li"},"This command outputs the follow:"),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre"},"\ud83d\uddfa Component Routes:\n\u25b8 my-mfe: http://localhost:3100/\n\n\ud83d\udd2d Preview Routes:\n\u25b8 my-mfe: http://localhost:3100/preview\n")),Object(i.b)("p",{parentName:"li"},"The ",Object(i.b)("strong",{parentName:"p"},"Component Routes")," section printed at the terminal describes the ",Object(i.b)("inlineCode",{parentName:"p"},"manifest"),"'s routes and that is the ",Object(i.b)("inlineCode",{parentName:"p"},"URL")," we\nwill use to fetch our micro-frontend.")),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Load the micro-frontend using the ",Object(i.b)("inlineCode",{parentName:"p"},"manifest")," URL using ",Object(i.b)("inlineCode",{parentName:"p"},"RaguComponent"),"."),Object(i.b)("pre",{parentName:"li"},Object(i.b)("code",{parentName:"pre",className:"language-jsx"},'import {RaguComponent} from "ragu-client-react";\n\nconst App = () => {\n  return <div>\n    <h1>My micro-frontend:</h1>\n    <RaguComponent src="http://localhost:3100" />\n  </div>;\n}\n\nexport default App;\n'))),Object(i.b)("li",{parentName:"ol"},Object(i.b)("p",{parentName:"li"},"Start the application and see it live!"),Object(i.b)("div",{parentName:"li",className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Does not stop the micro-frontend server")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"You should keep the micro-frontend running when you start the main application. Otherwise, it will not work."))),Object(i.b)("div",{parentName:"li",className:"admonition admonition-info alert alert--info"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Code Example")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"The code of the examples above can be found ",Object(i.b)("a",{parentName:"p",href:"https://github.com/ragu-framework/docs/tree/main/examples/react/consuming"},"here"),"."))))),Object(i.b)("h3",{id:"providing-props"},"Providing props"),Object(i.b)("p",null,"If you want to provide props to a micro-frontend you can just pass it as ",Object(i.b)("inlineCode",{parentName:"p"},"query parameter"),". If you want to provide a\n",Object(i.b)("inlineCode",{parentName:"p"},"name")," parameter to the micro-frontend the ",Object(i.b)("inlineCode",{parentName:"p"},"RaguComponent")," should be called that way:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-jsx"},'import {RaguComponent} from "ragu-client-react";\n\n<RaguComponent src="http://localhost:3100/?name=World" />\n')),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"You can read more about providing props at the\n",Object(i.b)("a",{parentName:"p",href:"http://localhost:3000/docs/consuming-a-micro-frontend#injecting-a-micro-frontend"},"Core concepts / Consuming a micro-frontend"),"\nsection."))),Object(i.b)("h3",{id:"advanced-options-and-callbacks"},"Advanced options and callbacks:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-jsx"},"import {RaguComponent} from \"ragu-client-react\";\n\n<RaguComponent\n  src=\"http://localhost:300\"\n  onFetchFail={() => {\n    alert('I was called because it was not possible to reach the manifest file URL.');\n  }}\n  onFetchCompleted={() => {\n    alert('I was called because the manifest URL was called successfully.');\n  }}\n  onHydrateCompleted={() => {\n    alert('I was called because the render process was completed and the micro-frontend is ready to interact with.');\n  }}\n  wrapper='div'\n/>\n")))}p.isMDXComponent=!0},111:function(e,t,n){"use strict";var a=n(0),o=n.n(a),i=n(115),c=n(106),r=n(56),l=n.n(r);var s=37,m=39;t.a=function(e){var t=e.lazy,n=e.block,r=e.defaultValue,d=e.values,p=e.groupId,b=e.className,u=Object(i.a)(),h=u.tabGroupChoices,v=u.setTabGroupChoices,f=Object(a.useState)(r),g=f[0],j=f[1],N=a.Children.toArray(e.children),O=[];if(null!=p){var w=h[p];null!=w&&w!==g&&d.some((function(e){return e.value===w}))&&j(w)}var y=function(e){var t=e.target,n=O.indexOf(t),a=N[n].props.value;j(a),null!=p&&(v(p,a),setTimeout((function(){var e,n,a,o,i,c,r,s;(e=t.getBoundingClientRect(),n=e.top,a=e.left,o=e.bottom,i=e.right,c=window,r=c.innerHeight,s=c.innerWidth,n>=0&&i<=s&&o<=r&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(l.a.tabItemActive),setTimeout((function(){return t.classList.remove(l.a.tabItemActive)}),2e3))}),150))},C=function(e){var t,n;switch(e.keyCode){case m:var a=O.indexOf(e.target)+1;n=O[a]||O[0];break;case s:var o=O.indexOf(e.target)-1;n=O[o]||O[O.length-1]}null===(t=n)||void 0===t||t.focus()};return o.a.createElement("div",{className:"tabs-container"},o.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(c.a)("tabs",{"tabs--block":n},b)},d.map((function(e){var t=e.value,n=e.label;return o.a.createElement("li",{role:"tab",tabIndex:g===t?0:-1,"aria-selected":g===t,className:Object(c.a)("tabs__item",l.a.tabItem,{"tabs__item--active":g===t}),key:t,ref:function(e){return O.push(e)},onKeyDown:C,onFocus:y,onClick:y},n)}))),t?Object(a.cloneElement)(N.filter((function(e){return e.props.value===g}))[0],{className:"margin-vert--md"}):o.a.createElement("div",{className:"margin-vert--md"},N.map((function(e,t){return Object(a.cloneElement)(e,{key:t,hidden:e.props.value!==g})}))))}},112:function(e,t,n){"use strict";var a=n(0),o=n.n(a);t.a=function(e){var t=e.children,n=e.hidden,a=e.className;return o.a.createElement("div",{role:"tabpanel",hidden:n,className:a},t)}},114:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),o=n.n(a),i=n(113),c=n(111),r=n(112),l=function(e){var t=e.yarn,n=e.npm,a=e.both,l=e.binExecution,s=t||a,m=n||a;return o.a.createElement(c.a,{defaultValue:"yarn",values:[{label:"Yarn",value:"yarn"},{label:"NPM",value:"npm"}]},o.a.createElement(r.a,{value:"yarn"},o.a.createElement(i.a,{className:"language-shell"},"yarn "+s)),o.a.createElement(r.a,{value:"npm"},o.a.createElement(i.a,{className:"language-shell"},(l?"npx":"npm")+" "+m)))}},134:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/front-end-injection-115ef9c924c741eb74fa001da8adbbb8.png"},140:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),i=n(114),c=function(e){var t=e.packageName,n=e.isDev;return o.a.createElement(i.a,{yarn:"add "+t+" "+(n?"--dev":""),npm:"install "+t+" "+(n?"--dev":"")})}}}]);